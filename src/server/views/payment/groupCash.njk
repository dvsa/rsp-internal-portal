{% extends 'layouts/default.layout.njk' %}

{% set pageTitle = 'DVSA Road Side Payment Portal' %}
{% set pageBreadcrumbItems = [
    { text: 'Home', url: '/' },
    { text: 'Payment Code', url: '/' },
    { text: 'Penalty Details', url: '/payment-code/'+paymentCode },
    { text: 'Payment by Cash' }
  ]
%}

{% block content %}
  
  {% call components.gridRow() %}
    {% call components.columnTwoThirds() %}
      {{ components.heading(text="Payment by cash", tag="h1", size="large") }}
        <table class="details">
          <caption class="heading-medium">Penalty Details</caption>
          <tbody>
            <tr>
              <td>Payment Code:</td>
              <td>{{ paymentCode }}</td> 
            </tr>
            <tr>
              <td>Vehicle registration:</td>
              <td>{{ penaltyGroupDetails.registrationNumber }}</td>
            </tr>
            <tr>
              <td>Date issued:</td>
              <td>{{ penaltyGroupDetails.date }}</td>
            </tr>
            <tr>
              <td>Location:</td>
              <td>{{ penaltyGroupDetails.location }}</td>
            </tr>
            <tr>
              <td>Status:</td>
              <td>{{ paymentStatus }}</td>
          </tbody>
        </table>

        <br />

        <table>
          <thead>
            <td>Penalty Reference</td>
            <td>Amount</td>
          </thead>
          <tbody>
            {% for penaltyTypeGroup in penaltyDetails %}
              {% if penaltyTypeGroup.type == paymentPenaltyType %}
                {% for penalty in penaltyTypeGroup.penalties %}
                  <tr>
                    <td>{{ penalty.formattedReference }}</td>
                    <td>&pound;{{ penalty.amount }}</td>
                  </tr>
                {% endfor %}
              {% endif %}
            {% endfor %}
          </tbody>
        </table>

        <p>
        {% call components.form(action="", method="POST") %}
          <input type="hidden" name="paymentCode" value="{{ paymentCode }}">
          <input type="hidden" name="paymentType" value="cash">
          {{ components.heading(text="Payment details ", tag="h3", size="medium") }}
          <p>
            {{ components.field(id="slipNumber", type="number", label="Paying in slip number", required=true) }}
          </p>
          {{ components.button(text="Confirm cash payment", type="submit") }}
        {%- endcall %}
    {%- endcall %}
  {%- endcall %}
{% endblock %}